ئورد مكون، عنصرمخصص، عنصرئدخال، عنصر؛
ئورد الئان من تاريخ؛
ئورد المستند من مستند؛
ئورد النافدة من نافدة؛
ئورد الكل ك ئتيلات من ئتيلات؛
ئورد غمازة من مكون.غمازة؛
ئورد مختطشركة، مختطمستخدم من مختطة؛
ئورد الكل ك قاعدب من قاعدب؛

ئعلن تسجيل ():
	يمدد مكون()؛
	يملك نوعبنية مدخ؛
	هدا._حالة = {
		خطوة: 1
	}؛
	هدا.مدخ = {
		ئدخئسمشركة: ''،
		ئدخئسمكامل: ''،
		ئدخمدينة: ''،
		ئدخبلد: ''،
		ئدخبريد: ''،
		ئدخموقع: ''،
		ئدخمستخدم: ''،
		ئدخمرور: ''،
		رمزشركة: ''،
		رمزتحقق: ''
	}؛
تم

ئعلن تسجيل.صيير ():
	ئرجع (
		<قسم صنف="مخطط-طولي ئصفف-وسط ئرصف-وسط فجوة-12 ط-كامل ع-شاشة خلف-ئسود">

		  <قسم صنف="مخطط-عرضي ئرصف-وسط">
			<صورة مصدر="/ملفا/شعار.svg" عرض="120"></صورة>
		  </قسم>
		  
		  <شرط>
			<عند تحقق="هدا._حالة.خطوة == 1">
			  <قسم صنف="مخطط-طولي ع-96 فجوة-4">
				<حيز صنف="نصوسط نص-ئبيض نصصغ">سيصلك رمز التحقق علا بريدك، تئكد من صحته.</حيز>
				<ئدخال ئسم="ئدخئسمشركة" نوع="نص" ستنب="ئسمشركة" صنف="مقوس خلف-رمادي-700 نص-ئبيض نصكجج"></ئدخال>
				<ئدخال ئسم="ئدخئسمكامل" نوع="نص" ستنب="ئسمكامل" صنف="مقوس خلف-رمادي-700 نص-ئبيض نصكجج"></ئدخال>
				<قسم صنف="مخطط-عرضي ئصفف-بين ئرصف-بين">
				  <ئدخال ئسم="ئدخمدينة" نوع="نص" ستنب="مدينة" صنف="ع-44 مقوس خلف-رمادي-700 نص-ئبيض نصكجج نصبداية"></ئدخال>
				  <ئدخال ئسم="ئدخبلد" نوع="نص" ستنب="بلد" صنف="ع-48 مقوس خلف-رمادي-700 نص-ئبيض نصكجج نصبداية"></ئدخال>
				</قسم>
				<ئدخال ئسم="ئدخبريد" نوع="نص" ستنب="بريدرقمي" صنف="مقوس خلف-رمادي-700 نص-ئبيض نصكجج"></ئدخال>
				<ئدخال ئسم="ئدخموقع" نوع="نص" ستنب="موقعويب" صنف="مقوس خلف-رمادي-700 نص-ئبيض نصكجج"></ئدخال>
				<قسم صنف="مخطط-عرضي ئصفف-بين ئرصف-بين">
				  <ئدخال ئسم="ئدخمستخدم" نوع="نص" ستنب="ئسمستخدم" صنف="ع-44 مقوس خلف-رمادي-700 نص-ئبيض نصكجج"></ئدخال>
				  <ئدخال ئسم="ئدخمرور" نوع="كلمرور" ستنب="كلمرور" صنف="ع-48 مقوس خلف-رمادي-700 نص-ئبيض نصكجج نصبداية"></ئدخال>
				</قسم>
				<قسم صنف="مخطط-عرضي ئصفف-بين ئرصف-بين">
				  <حيز عندنقر="نقرئرجع" صنف="مئشر-سبابة ع-28 خلف-رمادي-600 نصوسط حشص-3 نصكج نص-ئبيض مقوس">ئرجع</حيز>
				  <حيز عندنقر="نقرسججل" صنف="مئشر-سبابة ع-64 خلف-ئحمر-600 نصوسط حشص-3 نصكج نص-ئبيض مقوس">سججل</حيز>
				</قسم>
			  </قسم>
			</عند>

			<عند تحقق="هدا._حالة.خطوة == 2">
			  <قسم صنف="مخطط-طولي ع-96 فجوة-4">
				<قسم صنف="نص-ئبيض نصوسط">
				  <حيز>يرجا ئدخال الرمز الدي تم ئرساله ئلا بريدك الرقمي</حيز>
				</قسم>
				<ئدخال معرف="ئدخرمزتحقق" نوع="نص" ستنب="رمز التئكيد" صنف="ط-14 مقوس خلف-رمادي-700 نص-ئبيض"></ئدخال>
				<حيز عندنقر="نقرتحقق" صنف="مئشر-سبابة خلف-ئحمر-600 نصوسط حشص-3 نصكج نص-ئبيض مقوس">تحقق</حيز>
			  </قسم>
			</عند>

			<عند تحقق="هدا._حالة.خطوة == 3">
			  <قسم صنف="مخطط-طولي ع-96 فجوة-4">
				<قسم صنف="نص-ئبيض نصوسط">
				  <حيز>تم ئنشائ حسابك بنجاح</حيز>
				</قسم>
				<حيز معرف="زرئبدئ" عندنقر="نقرئبدئ" صنف="مئشر-سبابة خلف-ئحمر-600 نصوسط حشص-3 نصكج نص-ئبيض مقوس">ئبدئ</حيز>
			  </قسم>
			</عند>

		  </شرط>
		</قسم>
	)؛
تم

ئعلن تسجيل.نقرئرجع ():
	(المستند.ئستعلم((<تطبيق>)) ك مكون).خدحالة({
		صفحة: 'ئستقبال'
	})؛
تم

ئعلن تسجيل.نقرسججل () ك وعد فارغ:
	تسجيل نفسه = المستند.ئستعلم((<تسجيل>))؛
	مكون غمازة = المستند.ئستعلم((<غمازة>))؛
	# جمع المدخلات
	عنصرئدخال[] ئدخالات = نفسه.ردبئمارة((<ئدخال>))؛
	لكل ئدخ في ئدخالات:
		نصية قيمة = ئدخ.قيمة؛
		ئدا قيمة == '':
			غمازة.خدحالة({
				رسالة: 'يرجا ملئ جميع الحقلين'
			})؛
			ئرجع؛
		تم
		نفسه.مدخ[ئدخ.ئسم] = ئدخ.قيمة؛
	تم
	نفسه.مدخ.رمزشركة = ئتيلات.ئستولدرمزشركة()؛
	نفسه.مدخ.رمزتحقق = ريتما ئتيلات.ئستولدرمزتحقق(نفسه.مدخ.ئدخبريد)؛
	نفسه.خدحالة({
		خطوة: 2
	})؛
تم

ئعلن تسجيل.نقرتحقق () ك وعد فارغ:
	تسجيل نفسه = المستند.ئستعلم((<تسجيل>))؛
	مكون غمازة = المستند.ئستعلم((<غمازة>))؛
	# تئكد من الرمز
	نصية ئدخرمزتحقق = (نفسه.ئستعلم('#ئدخرمزتحقق') ك عنصرئدخال).قيمة؛
	ئدا ئدخرمزتحقق لا= نفسه.مدخ.رمزتحقق:
		غمازة.خدحالة({
			رسالة: 'رمز التحقق غير صحيح'
		})؛
		ئرجع؛
	تم
	# ئنشئ قاعدب وئنتقل ئلا الترحيب
	مختطشركة شركة = {
		 _معرف: 'شركة/' + نفسه.مدخ.رمزشركة،
		نوع: 'شركة'،
		رمزشركة: نفسه.مدخ.رمزشركة،
		ئسم: نفسه.مدخ.ئدخئسمشركة،
		مدينة: نفسه.مدخ.ئدخمدينة،
		دولة: نفسه.مدخ.ئدخبلد،
		موقعويب: نفسه.مدخ.ئدخموقع
	}؛
	مختطمستخدم مستخدم = {
		_معرف: نفسه.مدخ.ئدخمستخدم + '/' + نفسه.مدخ.رمزشركة،
		نوع: 'مستخدم'،
		رمزشركة: نفسه.مدخ.رمزشركة،
		رتبة: 'مسئول'،
		ئسمكامل: نفسه.مدخ.ئدخئسمكامل،
		ئسمستخدم: نفسه.مدخ.ئدخمستخدم،
		بريدرقمي: نفسه.مدخ.ئدخبريد،
		كلمرور: نفسه.مدخ.ئدخمرور،
		ئشتركفي: الئان()
	}؛
	ريتما قاعدب.ئنشئقاعدب(هلجديد: صحيح، بيا: {شركة، مستخدم})؛
	قل نفسه.مدخ.رمزشركة؛
	نفسه.خدحالة({
		خطوة: 3
	})؛
تم

ئعلن تسجيل.نقرئبدئ () ك وعد:
	تسجيل نفسه = المستند.ئستعلم((<تسجيل>))؛
	نفسه.ئستعلم('#زرئبدئ').ئشتملداخلي = 'تحميل..'؛
	#حاول:
		ريتما قاعدب.ئستنسخمحلي(نفسه.مدخ.رمزشركة)؛
	#ئستدرك:
		
	#تم
	#النافدة.موقع.ئعدتحميل()؛
تم

ئعلن مدخل ():
	عنصرمخصص.سججل('تسجيل'، تسجيل)؛
تم
