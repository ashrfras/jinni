ئورد عنصرئشتمل من ئساسية.عنصرئشتمل؛
ئورد عنصرمخصص من ئساسية.عنصرمخصص؛
ئورد مستند من ئساسية.مستند؛
ئورد window من '//'؛

ئعلن مكون (خيا):
	يمدد عنصرئشتمل()؛
	يملك نص معرف، نص نوع، نص نمط، 
	عنصرئشتمل حالة، عنصرئشتمل _دوم_حالي، عنصرئشتمل جدره؛

	ئدا هدا.لهخاصية('معرف'):
		دع نص معف = هدا.ردخاصية('معرف')؛
		هدا.خدخاصية('id'، معف)؛
		هدا['id'] = معف؛
		هدا.معرف = معف؛
	تم
	
	ئدا هدا.لهخاصية('صنف'):
		دع صنفه = هدا.ردخاصية('صنف')؛
		هدا.خدخاصية('class'، صنفه)؛
	تم
	هدا.نوع = خيا وو (خيا.نوع ئدا خيا.نوع وئلا 'تابع')؛
	هدا.نمط = خيا وو (خيا.نمط ئدا خيا.نمط وئلا 'مفتوح')؛

	ئدا هدا.نوع == 'مستقل':
		هدا.جدره = هدا.ئربطدوممخفي({
			نمط: هدا.نمط
		})؛
	تم
تم

ئعلن مكون.سججل ():

تم

ئعلن مكون.يرقب ():
	ئرجع [ك نص]؛
تم

ئعلن مكون.صيير ():
	ئرجع (
		<فجوة></فجوة>
	)؛
تم

ئعلن مكون._صييرمشهد ():
	دع داخله = هدا.ئشتملداخلي.قللم()؛
	ئدا هدا.نوع == 'مستقل':
		هدا.جدره['replaceChildren'](...هدا._دوم_حالي.childNodes)؛
		هدا._دوم_حالي = هدا.جدره؛
	وئلا:
		دع حالة = هدا.ئستعلم((<حالة>))؛
		دع حالتج = هدا._دوم_حالي.ئستعلم((<حالة>))؛
		# في حال وجود وسمة <حالة> فيقتصر التحديت علا عنصرينها فقط
		ئدا حالة وو حالتج:
			حالة.ئشتملداخلي = حالتج.ئشتملداخلي؛
		وئلا:
			هدا['replaceChildren'](...هدا._دوم_حالي.childNodes)؛
		تم
		هدا._دوم_حالي = هدا ؛
		دع فجوة = هدا.ئستعلم((<فجوة>))؛
		ئدا فجوة:
			فجوة.ئشتملخارجي = داخله؛
		تم
	تم
تم

ئعلن مكون.حددتمشهد ():
	#حفض شجرة الدوم الجديد
	دع دوم = مستند.ئنشئعنصر('div')؛
	دوم.ئشتملداخلي = هدا.صيير()؛
	هدا._دوم_حالي = دوم؛
	هدا._صييرمشهد()؛
تم


ئعلن مكون.ردحالة ():
	ئرجع هدا.حالة؛
تم

ئعلن مكون.ئربطحدتين ():
	دع حدتين = ['عندنقر'، 'عندتغيير'، 'عندتركمفتاح']؛
	لكل حدت في حدتين:
		دع عندحدتين = هدا.ئستعلمكل("[{حدت}]")؛
		لكل عنصر في عندحدتين:
			ئدا هدا[عنصر.ردخاصية(حدت)]:
				عنصر[حدت] = هدا[عنصر.ردخاصية(حدت)].ئربط(هدا، عنصر)؛
			تم
		تم
	تم
تم

ئعلن مكون.حددت ():
	هدا.حددتمشهد()؛
	هدا.ئربطحدتين()؛
تم

ئعلن مكون.خدحالة (قيمة):
	ئدا ليس هدا.حالة:
		هدا.حالة = قيمة؛
	وئلا:
		# تحديت الحالة
		ئدا قيمة:
			لكل ح في هدا.حالة:
				ئدا ح في قيمة:
					هدا.حالة[ح] = قيمة[ح]؛
				تم
			تم
		تم
		هدا.حددت()؛
	تم
تم

ئعلن مكون.حممل ():
	هدا.ئربطحدتين()؛
تم

ئعلن مكون.حددتخاصية (ئسم، قديم، جديد):

تم

ئعلن مكون.ئخلي ():

تم

ئعلن مكون.connectedCallback ():
	هدا.حددتمشهد()؛
	هدا.حممل()؛
تم

ئعلن مكون.disconnectedCallback ():
	ئرجع هدا.ئخلي()؛
تم

ئعلن مكون.attributeChangedCallback (ئسم، قديم، جديد):
	ئرجع هدا.حددتخاصية(ئسم، قديم، جديد)؛
تم
