ئورد عنصرئشتمل من ئساسية.عنصرئشتمل؛
ئورد عنصرمخصص من ئساسية.عنصرمخصص؛
ئورد عنصر من ئساسية.عنصر؛
ئورد مستند من ئساسية.مستند؛
ئورد جدرمخفي من ئساسية.جدرمخفي؛

ئعلن مكون (تعداد م_نوع [مستقل، تابع] = 'تابع'، تعداد م_نمط [مفتوح، مغلق] = 'مفتوح'):
	يمدد عنصرئشتمل()؛
	يملك 
		تعداد نوع [مستقل، تابع]، 
		تعداد نمط [مفتوح، مغلق]، 
		نوعبنية _حالة، 
		عنصرئشتمل _دوم_حالي، 
		جدرمخفي جدره؛

	ئدا هدا.لهخاصية('معرف'):
		نصية معف = هدا.ردخاصية('معرف')؛
		هدا.خدخاصية('id'، معف)؛
		هدا['id'] = معف؛
		هدا.معرف = معف؛
	تم
	
	ئدا هدا.لهخاصية('صنف'):
		نصية صنفه = هدا.ردخاصية('صنف')؛
		هدا.خدخاصية('class'، صنفه)؛
	تم
	هدا.نوع = م_نوع؛
	هدا.نمط = م_نمط؛
		
	ئدا هدا.نوع == 'مستقل':
		هدا.جدره = هدا.ئربطدوممخفي({
			نمط: هدا.نمط
		})؛
	تم
تم

ئعلن مكون.سججل ():

تم

ئعلن مكون.يرقب () ك نصية[]:
	ئرجع [] ك نصية؛
تم

ئعلن مكون.صيير () ك نصية:
	ئرجع (
		<فجوة></فجوة>
	)؛
تم

ئعلن مكون._صييرمشهد ():
	نصية داخله = هدا.ئشتملداخلي.قللم()؛
	ئدا هدا.نوع == 'مستقل':
		#هدا.جدره.عووضبنين(...هدا._دوم_حالي.عقداتبنين)؛
		هدا.جدره.عووضبنين(هدا._دوم_حالي.عقداتبنين ك عنصر[])؛
		#هدا.جدره['replaceChildren'](...هدا._دوم_حالي.childNodes)؛
		هدا._دوم_حالي = هدا.جدره ك عنصرئشتمل؛
	وئلا:
		عنصر حالة = هدا.ئستعلم((<حالة>))؛
		عنصر حالتج = هدا._دوم_حالي.ئستعلم((<حالة>))؛
		# في حال وجود وسمة <حالة> فيقتصر التحديت علا عنصرينها فقط
		ئدا حالة وو حالتج:
			حالة.ئشتملداخلي = حالتج.ئشتملداخلي؛
		وئلا:
			#هدا['replaceChildren'](...هدا._دوم_حالي.childNodes)؛
			هدا.عووضبنين(هدا._دوم_حالي.عقداتبنين ك عنصر[])؛
		تم
		هدا._دوم_حالي = هدا ك عنصرئشتمل ؛
		عنصر فجوة = هدا.ئستعلم((<فجوة>))؛
		ئدا فجوة:
			فجوة.ئشتملخارجي = داخله؛
		تم
	تم
تم

ئعلن مكون.حددتمشهد ():
	#حفض شجرة الدوم الجديد
	عنصر دوم = مستند.ئنشئعنصر('div')؛
	دوم.ئشتملداخلي = هدا.صيير()؛
	هدا._دوم_حالي = دوم ك عنصرئشتمل؛
	هدا._صييرمشهد()؛
تم


ئعلن مكون.ردحالة () ك نوعبنية:
	ئرجع هدا._حالة؛
تم

ئعلن مكون.ئربطحدتين ():
	نصية[] حدتين = ['عندنقر'، 'عندتغيير'، 'عندتركمفتاح']؛
	لكل حدت في حدتين:
		عنصر[] عندحدتين = هدا.ئستعلمكل("[{حدت}]")؛
		لكل عنص في عندحدتين:
			ئدا هدا[عنص.ردخاصية(حدت)]:
				دع وسيط = عنص ك منوع؛
				#وسيط[حدت] = هدا[عنص.ردخاصية(حدت)].ئربط(هدا، عنص)؛
			تم
		تم
	تم
تم

ئعلن مكون.حددت ():
	هدا.حددتمشهد()؛
	هدا.ئربطحدتين()؛
تم

ئعلن مكون.خدحالة (نوعبنية قيمة):
	ئدا ليس هدا._حالة:
		هدا._حالة = قيمة؛
	وئلا:
		# تحديت الحالة
		ئدا قيمة:
			لكل مف في نوعبنية.مفتاحين(هدا._حالة):
				ئدا مف في قيمة:
					هدا._حالة[مف] = قيمة[مف]؛
				تم
			تم
		تم
		هدا.حددت()؛
	تم
تم

ئعلن مكون.حممل ():
	هدا.ئربطحدتين()؛
تم

ئعلن مكون.حددتخاصية (ئسم، قديم، جديد):

تم

ئعلن مكون.ئخلي ():

تم

ئعلن مكون.connectedCallback ():
	هدا.حددتمشهد()؛
	هدا.حممل()؛
تم

ئعلن مكون.disconnectedCallback ():
	هدا.ئخلي()؛
تم

ئعلن مكون.attributeChangedCallback (ئسم، قديم، جديد):
	هدا.حددتخاصية(ئسم، قديم، جديد)؛
تم
